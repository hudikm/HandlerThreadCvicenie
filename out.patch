[
    {
        "commitTag": "1.0",
        "commitMsg": "Úprava layout-u aplikácie",
        "commitHash": "af6bb53a561bb7a67eae5ed20c12c8eefad867f5",
        "commitDiff": "diff --git a/app/src/main/res/drawable/loading.png b/app/src/main/res/drawable/loading.png\nnew file mode 100644\nindex 0000000..8059519\nBinary files /dev/null and b/app/src/main/res/drawable/loading.png differ\ndiff --git a/app/src/main/res/layout/activity_main.xml b/app/src/main/res/layout/activity_main.xml\nindex 4fc2444..da82534 100644\n--- a/app/src/main/res/layout/activity_main.xml\n+++ b/app/src/main/res/layout/activity_main.xml\n@@ -1,18 +1,22 @@\n <?xml version=\"1.0\" encoding=\"utf-8\"?>\n-<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n-    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n+<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n     xmlns:tools=\"http://schemas.android.com/tools\"\n     android:layout_width=\"match_parent\"\n     android:layout_height=\"match_parent\"\n+    android:orientation=\"vertical\"\n     tools:context=\".MainActivity\">\n \n-    <TextView\n+    <ScrollView\n         android:layout_width=\"wrap_content\"\n         android:layout_height=\"wrap_content\"\n-        android:text=\"Hello World!\"\n-        app:layout_constraintBottom_toBottomOf=\"parent\"\n-        app:layout_constraintLeft_toLeftOf=\"parent\"\n-        app:layout_constraintRight_toRightOf=\"parent\"\n-        app:layout_constraintTop_toTopOf=\"parent\" />\n+        android:layout_gravity=\"center_horizontal\">\n \n-</androidx.constraintlayout.widget.ConstraintLayout>\n\\ No newline at end of file\n+        <LinearLayout\n+            android:id=\"@+id/imageContainer\"\n+            android:layout_width=\"wrap_content\"\n+            android:layout_height=\"wrap_content\"\n+            android:orientation=\"vertical\">\n+\n+        </LinearLayout>\n+    </ScrollView>\n+</LinearLayout>\n\\ No newline at end of file\n",
        "remoteUrl": "",
        "fileList": " .\n └─ app\n    └─ src\n       └─ main\n          ├─ res\n          │  └─ layout\n          │     └─ activity_main.xml\n          ├─ java\n          │  └─ sk\n          │     └─ uniza\n          │        └─ handlerthreadcvicenie\n          │           └─ MainActivity.java\n          └─ AndroidManifest.xml"
    },
    {
        "commitTag": "1.1",
        "commitMsg": "Vytvorenie MyHandlerThread triedy",
        "commitHash": "5b60840ed884ad84f626b5ee98352693cabac7e6",
        "commitDiff": "diff --git a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\nnew file mode 100644\nindex 0000000..f6e5020\n--- /dev/null\n+++ b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\n@@ -0,0 +1,17 @@\n+package sk.uniza.handlerthreadcvicenie;\n+\n+import android.os.HandlerThread;\n+import android.os.Process;\n+\n+public class MyHandlerThread extends HandlerThread {\n+\n+    // Názov vlákna, ktorý je zobrazený pri debugovaní aplikácie\n+    private static final String TAG = MyHandlerThread.class.getSimpleName();\n+\n+    public MyHandlerThread() {\n+        super(TAG);\n+        setPriority(Process.THREAD_PRIORITY_BACKGROUND); //Nastavenie\n+        // priority pracovnému vláknu\n+\n+    }\n+}\n",
        "remoteUrl": "",
        "fileList": " .\n └─ app\n    └─ src\n       └─ main\n          ├─ res\n          │  └─ layout\n          │     └─ activity_main.xml\n          ├─ java\n          │  └─ sk\n          │     └─ uniza\n          │        └─ handlerthreadcvicenie\n          │           ├─ MainActivity.java\n          │           └─ MyHandlerThread.java\n          └─ AndroidManifest.xml"
    },
    {
        "commitTag": "1.2",
        "commitMsg": "Vytvorenie rozhrania, ktoré sa použije na odovzdanie stiahnutého obrázku",
        "commitHash": "e1f221b75852b5cba4f9c547aac72675b5c5b5b7",
        "commitDiff": "diff --git a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java\nindex 9dd5fcc..b3444b8 100644\n--- a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java\n+++ b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java\n@@ -1,14 +1,22 @@\n package sk.uniza.handlerthreadcvicenie;\n \n+import android.graphics.Bitmap;\n import android.os.Bundle;\n+import android.widget.ImageView;\n \n import androidx.appcompat.app.AppCompatActivity;\n \n-public class MainActivity extends AppCompatActivity {\n+public class MainActivity extends AppCompatActivity\n+        implements MyHandlerThread.Callback {\n \n     @Override\n     protected void onCreate(Bundle savedInstanceState) {\n         super.onCreate(savedInstanceState);\n         setContentView(R.layout.activity_main);\n     }\n+\n+    @Override\n+    public void onImageDownloaded(ImageView imageView, Bitmap bitmap) {\n+\n+    }\n }\ndiff --git a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\nindex f6e5020..726b409 100644\n--- a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\n+++ b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\n@@ -1,6 +1,8 @@\n package sk.uniza.handlerthreadcvicenie;\n \n+import android.graphics.Bitmap;\n import android.os.HandlerThread;\n+import android.widget.ImageView;\n import android.os.Process;\n \n public class MyHandlerThread extends HandlerThread {\n@@ -8,6 +10,11 @@ public class MyHandlerThread extends HandlerThread {\n     // Názov vlákna, ktorý je zobrazený pri debugovaní aplikácie\n     private static final String TAG = MyHandlerThread.class.getSimpleName();\n \n+    // Rozhranie pomocou ktorého sa odovzdá stiahnutý obrázok\n+    public interface Callback {\n+        public void onImageDownloaded(ImageView imageView, Bitmap bitmap);\n+    }\n+\n     public MyHandlerThread() {\n         super(TAG);\n         setPriority(Process.THREAD_PRIORITY_BACKGROUND); //Nastavenie\n",
        "remoteUrl": "",
        "fileList": " .\n └─ app\n    └─ src\n       └─ main\n          ├─ res\n          │  └─ layout\n          │     └─ activity_main.xml\n          ├─ java\n          │  └─ sk\n          │     └─ uniza\n          │        └─ handlerthreadcvicenie\n          │           ├─ MainActivity.java\n          │           └─ MyHandlerThread.java\n          └─ AndroidManifest.xml"
    },
    {
        "commitTag": "1.3",
        "commitMsg": "Vytvorenie pomocnej metódy prepareHandler",
        "commitHash": "e2dce6e195ffcba734aff8a75c4123ea4065b52b",
        "commitDiff": "diff --git a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\nindex 726b409..c66503e 100644\n--- a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\n+++ b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\n@@ -1,15 +1,23 @@\n package sk.uniza.handlerthreadcvicenie;\n \n import android.graphics.Bitmap;\n+import android.os.Handler;\n import android.os.HandlerThread;\n+import android.os.Message;\n import android.widget.ImageView;\n import android.os.Process;\n \n+import androidx.annotation.NonNull;\n+\n public class MyHandlerThread extends HandlerThread {\n \n     // Názov vlákna, ktorý je zobrazený pri debugovaní aplikácie\n     private static final String TAG = MyHandlerThread.class.getSimpleName();\n \n+    // Definovanie pracovného handlera, ktorý z prideleného loopera príjima\n+    // pridelenú prácu\n+    private Handler mWorkerHandler;\n+\n     // Rozhranie pomocou ktorého sa odovzdá stiahnutý obrázok\n     public interface Callback {\n         public void onImageDownloaded(ImageView imageView, Bitmap bitmap);\n@@ -21,4 +29,21 @@ public class MyHandlerThread extends HandlerThread {\n         // priority pracovnému vláknu\n \n     }\n+\n+    /**\n+     * Pomocná metóda na inicializáciu HandlerThread ako pracovného vlákna\n+     */\n+    public void prepareHandler() {\n+        mWorkerHandler = new Handler(getLooper()) {\n+            /*\n+            V handleMessage callback metóde sa spracovávajú prijaté spravy na\n+             pracovnom vlákne HandlerThread\n+             */\n+            @Override\n+            public void handleMessage(@NonNull Message msg) {\n+                // Spracovanie prijatej správy\n+            }\n+        };\n+    }\n+\n }\n",
        "remoteUrl": "",
        "fileList": " .\n └─ app\n    └─ src\n       └─ main\n          ├─ res\n          │  └─ layout\n          │     └─ activity_main.xml\n          ├─ java\n          │  └─ sk\n          │     └─ uniza\n          │        └─ handlerthreadcvicenie\n          │           ├─ MainActivity.java\n          │           └─ MyHandlerThread.java\n          └─ AndroidManifest.xml"
    },
    {
        "commitTag": "1.4",
        "commitMsg": "Vytvorenie pomocnej triedy ImageUrl",
        "commitHash": "50fe6348f677a68489bd5d9cf88f9cb6be8728d2",
        "commitDiff": "diff --git a/app/src/main/java/sk/uniza/handlerthreadcvicenie/ImageUrl.java b/app/src/main/java/sk/uniza/handlerthreadcvicenie/ImageUrl.java\nnew file mode 100644\nindex 0000000..043dc43\n--- /dev/null\n+++ b/app/src/main/java/sk/uniza/handlerthreadcvicenie/ImageUrl.java\n@@ -0,0 +1,24 @@\n+package sk.uniza.handlerthreadcvicenie;\n+\n+import android.widget.ImageView;\n+\n+import java.lang.ref.WeakReference;\n+\n+/*\n+  Dátova trieda, ktorá reprezentuje jeden obrázok, ktorý sa bude sťahovať\n+ */\n+public class ImageUrl {\n+    public static final int WHAT = 101; // Identifikátor správy\n+    public final String urlOfImage; //url adresa obrázku\n+    /*\n+     Referancia na  ImageView v ktorom sa zobrazí štiahnutý obrázok. Táto\n+     referencia je vo forme WeakReference, ktorá má zabezpečiť aby\n+     nedochádzalo k memory leaku v pripade restartovania aplikácie\n+     */\n+    public final WeakReference<ImageView> uiToShowImage;\n+\n+    public ImageUrl(String urlOfImage, ImageView uiToShowImage) {\n+        this.urlOfImage = urlOfImage;\n+        this.uiToShowImage = new WeakReference<>(uiToShowImage);\n+    }\n+}\ndiff --git a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\nindex c66503e..a7a4dab 100644\n--- a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\n+++ b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\n@@ -46,4 +46,5 @@ public class MyHandlerThread extends HandlerThread {\n         };\n     }\n \n+\n }\n",
        "remoteUrl": "",
        "fileList": " .\n └─ app\n    └─ src\n       └─ main\n          ├─ res\n          │  └─ layout\n          │     └─ activity_main.xml\n          ├─ java\n          │  └─ sk\n          │     └─ uniza\n          │        └─ handlerthreadcvicenie\n          │           ├─ ImageUrl.java\n          │           ├─ MainActivity.java\n          │           └─ MyHandlerThread.java\n          └─ AndroidManifest.xml"
    },
    {
        "commitTag": "1.5",
        "commitMsg": "Vytvorenie metódy handleRequest určenej na stiahnutie obrázku z internetu na pracovnom vlákne",
        "commitHash": "f49851732dcc449a8696ab73cf7dcee7c5f3b305",
        "commitDiff": "diff --git a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\nindex a7a4dab..21fe509 100644\n--- a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\n+++ b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\n@@ -1,14 +1,21 @@\n package sk.uniza.handlerthreadcvicenie;\n \n import android.graphics.Bitmap;\n+import android.graphics.BitmapFactory;\n import android.os.Handler;\n import android.os.HandlerThread;\n import android.os.Message;\n+import android.os.Trace;\n import android.widget.ImageView;\n import android.os.Process;\n \n import androidx.annotation.NonNull;\n \n+import java.io.IOException;\n+import java.io.InputStream;\n+import java.net.HttpURLConnection;\n+import java.net.URL;\n+\n public class MyHandlerThread extends HandlerThread {\n \n     // Názov vlákna, ktorý je zobrazený pri debugovaní aplikácie\n@@ -42,9 +49,53 @@ public class MyHandlerThread extends HandlerThread {\n             @Override\n             public void handleMessage(@NonNull Message msg) {\n                 // Spracovanie prijatej správy\n+\n             }\n         };\n     }\n \n+    /*\n+        Metóda na stiahnutie obrázku z internetu, Táto metóda je je spustená\n+        na pracovnom vlákne!\n+     */\n+    private void handleRequest(final ImageUrl imageUrl) {\n+\n+        try {\n+            final Bitmap bitmap;\n+\n+            Trace.beginSection(\"HTTP download\");\n+            HttpURLConnection connection =\n+                    (HttpURLConnection) new URL(imageUrl.urlOfImage)\n+                            .openConnection();\n+            connection.setRequestMethod(\"GET\");\n+            bitmap = BitmapFactory\n+                    .decodeStream((InputStream) connection.getContent());\n+\n+            try {\n+                this.sleep(500);\n+            } catch (InterruptedException e) {\n+                e.printStackTrace();\n+            }\n+\n+            /*\n+                Stiahnutý obrázok sa odovzdá s pomocu Handler triedy UI\n+                vláknu, ktoré zavolá callback metódu\n+             */\n+            if (bitmap != null) {\n+                mResponseHandler.post(new Runnable() {\n+                    @Override\n+                    public void run() {\n+                        // Spustené na UI vlákne\n+                        mCallback.onImageDownloaded(\n+                                imageUrl.uiToShowImage.get(),\n+                                bitmap);\n+                    }\n+                });\n+            }\n+\n+        } catch (IOException e) {\n+            e.printStackTrace();\n+        }\n+    }\n \n }\n",
        "remoteUrl": "",
        "fileList": " .\n └─ app\n    └─ src\n       └─ main\n          ├─ res\n          │  └─ layout\n          │     └─ activity_main.xml\n          ├─ java\n          │  └─ sk\n          │     └─ uniza\n          │        └─ handlerthreadcvicenie\n          │           ├─ ImageUrl.java\n          │           ├─ MainActivity.java\n          │           └─ MyHandlerThread.java\n          └─ AndroidManifest.xml"
    },
    {
        "commitTag": "1.6",
        "commitMsg": "Úprava konštruktora MyHandlerThread",
        "commitHash": "fd7ae37e023502c138e2dd10fac2802a11e67c87",
        "commitDiff": "diff --git a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\nindex 21fe509..f69b71a 100644\n--- a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\n+++ b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\n@@ -5,9 +5,9 @@ import android.graphics.BitmapFactory;\n import android.os.Handler;\n import android.os.HandlerThread;\n import android.os.Message;\n+import android.os.Process;\n import android.os.Trace;\n import android.widget.ImageView;\n-import android.os.Process;\n \n import androidx.annotation.NonNull;\n \n@@ -25,16 +25,23 @@ public class MyHandlerThread extends HandlerThread {\n     // pridelenú prácu\n     private Handler mWorkerHandler;\n \n+    // Referencia na Handler, ktorý je spätý s UI vláknom\n+    private Handler mResponseHandler;\n+    // Referencia na Callback rozhranie\n+    private Callback mCallback;\n+\n     // Rozhranie pomocou ktorého sa odovzdá stiahnutý obrázok\n     public interface Callback {\n         public void onImageDownloaded(ImageView imageView, Bitmap bitmap);\n     }\n \n-    public MyHandlerThread() {\n+    public MyHandlerThread(Handler responseHandler,\n+                           Callback callback) {\n         super(TAG);\n         setPriority(Process.THREAD_PRIORITY_BACKGROUND); //Nastavenie\n         // priority pracovnému vláknu\n-\n+        mResponseHandler = responseHandler;\n+        mCallback = callback;\n     }\n \n     /**\n",
        "remoteUrl": "",
        "fileList": " .\n └─ app\n    └─ src\n       └─ main\n          ├─ res\n          │  └─ layout\n          │     └─ activity_main.xml\n          ├─ java\n          │  └─ sk\n          │     └─ uniza\n          │        └─ handlerthreadcvicenie\n          │           ├─ ImageUrl.java\n          │           ├─ MainActivity.java\n          │           └─ MyHandlerThread.java\n          └─ AndroidManifest.xml"
    },
    {
        "commitTag": "1.7",
        "commitMsg": "Spracovanie prijatej správy v handleMessage metóde",
        "commitHash": "d73bdc2bcf888894977519095e7470aac55416fa",
        "commitDiff": "diff --git a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\nindex f69b71a..0ea7887 100644\n--- a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\n+++ b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\n@@ -56,7 +56,10 @@ public class MyHandlerThread extends HandlerThread {\n             @Override\n             public void handleMessage(@NonNull Message msg) {\n                 // Spracovanie prijatej správy\n-\n+                // Stiahnutie obrázkov z internetu\n+                if (msg.obj != null && msg.obj instanceof ImageUrl) {\n+                    handleRequest((ImageUrl) msg.obj);\n+                }\n             }\n         };\n     }\n",
        "remoteUrl": "",
        "fileList": " .\n └─ app\n    └─ src\n       └─ main\n          ├─ res\n          │  └─ layout\n          │     └─ activity_main.xml\n          ├─ java\n          │  └─ sk\n          │     └─ uniza\n          │        └─ handlerthreadcvicenie\n          │           ├─ ImageUrl.java\n          │           ├─ MainActivity.java\n          │           └─ MyHandlerThread.java\n          └─ AndroidManifest.xml"
    },
    {
        "commitTag": "1.8",
        "commitMsg": "Vytvorenie a inicializovanie novej inštancie MyHandlerThread",
        "commitHash": "c1d31f53283ebc7bc2221f67fb9f0a7ea26928f1",
        "commitDiff": "diff --git a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java\nindex b3444b8..0df6c40 100644\n--- a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java\n+++ b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java\n@@ -2,17 +2,26 @@ package sk.uniza.handlerthreadcvicenie;\n \n import android.graphics.Bitmap;\n import android.os.Bundle;\n+import android.os.Handler;\n import android.widget.ImageView;\n+import android.widget.LinearLayout;\n \n import androidx.appcompat.app.AppCompatActivity;\n \n public class MainActivity extends AppCompatActivity\n         implements MyHandlerThread.Callback {\n \n+    private LinearLayout imageContainer;\n+    private MyHandlerThread myHandlerThread;\n+\n     @Override\n     protected void onCreate(Bundle savedInstanceState) {\n         super.onCreate(savedInstanceState);\n         setContentView(R.layout.activity_main);\n+        myHandlerThread = new MyHandlerThread(new Handler(), this);\n+\n+        myHandlerThread.start();\n+        myHandlerThread.prepareHandler();\n     }\n \n     @Override\n",
        "remoteUrl": "",
        "fileList": " .\n └─ app\n    └─ src\n       └─ main\n          ├─ res\n          │  └─ layout\n          │     └─ activity_main.xml\n          ├─ java\n          │  └─ sk\n          │     └─ uniza\n          │        └─ handlerthreadcvicenie\n          │           ├─ ImageUrl.java\n          │           ├─ MainActivity.java\n          │           └─ MyHandlerThread.java\n          └─ AndroidManifest.xml"
    },
    {
        "commitTag": "1.9",
        "commitMsg": "Vytvorenie a odoslanie zoznamu obrázkov na stiahnutie",
        "commitHash": "b5c9a3968fc2e4d7bdc27f6db24807dad43186dd",
        "commitDiff": "diff --git a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java\nindex 0df6c40..396ba66 100644\n--- a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java\n+++ b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java\n@@ -11,6 +11,10 @@ import androidx.appcompat.app.AppCompatActivity;\n public class MainActivity extends AppCompatActivity\n         implements MyHandlerThread.Callback {\n \n+    // Url online služby, ktorá generuje obrázky s textom\n+    private String imageUrlLink = \"https://dummyimage.com/300/09f/fff\" +\n+            \".png&text=\";\n+\n     private LinearLayout imageContainer;\n     private MyHandlerThread myHandlerThread;\n \n@@ -18,12 +22,30 @@ public class MainActivity extends AppCompatActivity\n     protected void onCreate(Bundle savedInstanceState) {\n         super.onCreate(savedInstanceState);\n         setContentView(R.layout.activity_main);\n+        imageContainer = findViewById(R.id.imageContainer);\n         myHandlerThread = new MyHandlerThread(new Handler(), this);\n \n         myHandlerThread.start();\n         myHandlerThread.prepareHandler();\n     }\n \n+    @Override\n+    protected void onStart() {\n+        super.onStart();\n+        for (Integer i = 0; i < 10; i++) {\n+            ImageView imageView = new ImageView(this);\n+            // Informačný obrázok, že prebieha štahovanie\n+            imageView.setImageResource(R.drawable.loading);\n+            imageContainer.addView(imageView);\n+\n+            // Zavolanie pomocnej metódy na uloženie správy do zásobíka.\n+            // Správy zo zásobníka sú spracované na pracovnom vlákne\n+            myHandlerThread\n+                    .queueTask(new ImageUrl(imageUrlLink.concat(\"img+\" + i),\n+                            imageView));\n+        }\n+    }\n+\n     @Override\n     public void onImageDownloaded(ImageView imageView, Bitmap bitmap) {\n \ndiff --git a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\nindex 0ea7887..adc47c1 100644\n--- a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\n+++ b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\n@@ -64,6 +64,16 @@ public class MyHandlerThread extends HandlerThread {\n         };\n     }\n \n+    /**\n+     * Pomocná metóda na posunutie správy pracovnému HandlerThread vláknu\n+     *\n+     * @param imageUrl - obrázok, ktorý sa má stiahnuť\n+     */\n+    public void queueTask(ImageUrl imageUrl) {\n+        mWorkerHandler.obtainMessage(imageUrl.WHAT, imageUrl)\n+                .sendToTarget();\n+    }\n+\n     /*\n         Metóda na stiahnutie obrázku z internetu, Táto metóda je je spustená\n         na pracovnom vlákne!\n",
        "remoteUrl": "",
        "fileList": " .\n └─ app\n    └─ src\n       └─ main\n          ├─ res\n          │  └─ layout\n          │     └─ activity_main.xml\n          ├─ java\n          │  └─ sk\n          │     └─ uniza\n          │        └─ handlerthreadcvicenie\n          │           ├─ ImageUrl.java\n          │           ├─ MainActivity.java\n          │           └─ MyHandlerThread.java\n          └─ AndroidManifest.xml"
    },
    {
        "commitTag": "1.10",
        "commitMsg": "Zobrazenie stiahnutého obrázku",
        "commitHash": "8e3254b6d2b12324d823f840129113c5e7eae83f",
        "commitDiff": "diff --git a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java\nindex 396ba66..6a01c03 100644\n--- a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java\n+++ b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java\n@@ -48,6 +48,10 @@ public class MainActivity extends AppCompatActivity\n \n     @Override\n     public void onImageDownloaded(ImageView imageView, Bitmap bitmap) {\n-\n+        // Otestovanie či ImageView bol vytvorený v rovnakom kontexte. V\n+        // prípade reštatovania aplikácie, može ImageView pochádzať z už\n+        // zaniknutej inštancie Aplikácie.\n+        if (imageView.getContext() == this)\n+            imageView.setImageBitmap(bitmap);\n     }\n }\n",
        "remoteUrl": "",
        "fileList": " .\n └─ app\n    └─ src\n       └─ main\n          ├─ res\n          │  └─ layout\n          │     └─ activity_main.xml\n          ├─ java\n          │  └─ sk\n          │     └─ uniza\n          │        └─ handlerthreadcvicenie\n          │           ├─ ImageUrl.java\n          │           ├─ MainActivity.java\n          │           └─ MyHandlerThread.java\n          └─ AndroidManifest.xml"
    },
    {
        "commitTag": "1.11",
        "commitMsg": "Pridanie povolenia pre prístup na internet",
        "commitHash": "b9d330af0d1088636cce3e2c3405dc84a2d98515",
        "commitDiff": "diff --git a/app/src/main/AndroidManifest.xml b/app/src/main/AndroidManifest.xml\nindex 1676038..5aa251c 100644\n--- a/app/src/main/AndroidManifest.xml\n+++ b/app/src/main/AndroidManifest.xml\n@@ -2,6 +2,7 @@\n <manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n     package=\"sk.uniza.handlerthreadcvicenie\">\n \n+    <uses-permission android:name=\"android.permission.INTERNET\" />\n     <application\n         android:allowBackup=\"true\"\n         android:icon=\"@mipmap/ic_launcher\"\n",
        "remoteUrl": "",
        "fileList": " .\n └─ app\n    └─ src\n       └─ main\n          ├─ res\n          │  └─ layout\n          │     └─ activity_main.xml\n          ├─ java\n          │  └─ sk\n          │     └─ uniza\n          │        └─ handlerthreadcvicenie\n          │           ├─ ImageUrl.java\n          │           ├─ MainActivity.java\n          │           └─ MyHandlerThread.java\n          └─ AndroidManifest.xml"
    },
    {
        "commitTag": "1.12",
        "commitMsg": "Reštart aplikácie vplyvom konfiguračnej zmeny. Minimálne riešenie",
        "commitHash": "6dfcd7ef344b62d1b4bef63821fd86bc721d6f02",
        "commitDiff": "diff --git a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java\nindex 6a01c03..cd4cf80 100644\n--- a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java\n+++ b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java\n@@ -54,4 +54,10 @@ public class MainActivity extends AppCompatActivity\n         if (imageView.getContext() == this)\n             imageView.setImageBitmap(bitmap);\n     }\n+\n+    @Override\n+    protected void onDestroy() {\n+        super.onDestroy();\n+        myHandlerThread.quit();\n+    }\n }\n",
        "remoteUrl": "",
        "fileList": " .\n └─ app\n    └─ src\n       └─ main\n          ├─ res\n          │  └─ layout\n          │     └─ activity_main.xml\n          ├─ java\n          │  └─ sk\n          │     └─ uniza\n          │        └─ handlerthreadcvicenie\n          │           ├─ ImageUrl.java\n          │           ├─ MainActivity.java\n          │           └─ MyHandlerThread.java\n          └─ AndroidManifest.xml"
    },
    {
        "commitTag": "2.0",
        "commitMsg": "Využitie Singleton návrhového vzoru",
        "commitHash": "ce66f77a589451c6e7ce32680c701b730ee7a372",
        "commitDiff": "diff --git a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java\nindex cd4cf80..f0611d0 100644\n--- a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java\n+++ b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java\n@@ -23,10 +23,14 @@ public class MainActivity extends AppCompatActivity\n         super.onCreate(savedInstanceState);\n         setContentView(R.layout.activity_main);\n         imageContainer = findViewById(R.id.imageContainer);\n-        myHandlerThread = new MyHandlerThread(new Handler(), this);\n+        myHandlerThread = MyHandlerThread.getInstance(new Handler(), this);\n \n-        myHandlerThread.start();\n-        myHandlerThread.prepareHandler();\n+        if (!myHandlerThread.isAlive()) {\n+            // Iba pri prvom spustení musí prebehnúť inicializácia\n+            // HandlerThread triedy\n+            myHandlerThread.start();\n+            myHandlerThread.prepareHandler();\n+        }\n     }\n \n     @Override\n@@ -58,6 +62,7 @@ public class MainActivity extends AppCompatActivity\n     @Override\n     protected void onDestroy() {\n         super.onDestroy();\n-        myHandlerThread.quit();\n+\n+\n     }\n }\ndiff --git a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\nindex adc47c1..ccb9613 100644\n--- a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\n+++ b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\n@@ -18,6 +18,9 @@ import java.net.URL;\n \n public class MyHandlerThread extends HandlerThread {\n \n+    // Referencia na vytvorenú štanciu MyHandlerThread\n+    private static MyHandlerThread instance = null;\n+\n     // Názov vlákna, ktorý je zobrazený pri debugovaní aplikácie\n     private static final String TAG = MyHandlerThread.class.getSimpleName();\n \n@@ -35,13 +38,23 @@ public class MyHandlerThread extends HandlerThread {\n         public void onImageDownloaded(ImageView imageView, Bitmap bitmap);\n     }\n \n-    public MyHandlerThread(Handler responseHandler,\n-                           Callback callback) {\n+    public MyHandlerThread() {\n         super(TAG);\n         setPriority(Process.THREAD_PRIORITY_BACKGROUND); //Nastavenie\n         // priority pracovnému vláknu\n-        mResponseHandler = responseHandler;\n-        mCallback = callback;\n+    }\n+\n+    public static MyHandlerThread getInstance(@NonNull Handler responseHandler,\n+                                              @NonNull Callback callback) {\n+\n+        if (instance == null || !instance.isAlive()) {\n+            instance = new MyHandlerThread();\n+        }\n+\n+        instance.mResponseHandler = responseHandler;\n+        instance.mCallback = callback;\n+\n+        return instance;\n     }\n \n     /**\n",
        "remoteUrl": "",
        "fileList": " .\n └─ app\n    └─ src\n       └─ main\n          ├─ res\n          │  └─ layout\n          │     └─ activity_main.xml\n          ├─ java\n          │  └─ sk\n          │     └─ uniza\n          │        └─ handlerthreadcvicenie\n          │           ├─ ImageUrl.java\n          │           ├─ MainActivity.java\n          │           └─ MyHandlerThread.java\n          └─ AndroidManifest.xml"
    },
    {
        "commitTag": "2.1",
        "commitMsg": "Optimalizácia s pohladu reštartovania aktivity",
        "commitHash": "21516f8a7dedc8d805214d5a2262832315c8e881",
        "commitDiff": "diff --git a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java\nindex f0611d0..8636eed 100644\n--- a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java\n+++ b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java\n@@ -62,7 +62,7 @@ public class MainActivity extends AppCompatActivity\n     @Override\n     protected void onDestroy() {\n         super.onDestroy();\n-\n+        myHandlerThread.onDestroy();\n \n     }\n }\ndiff --git a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\nindex ccb9613..cdc1bf6 100644\n--- a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\n+++ b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\n@@ -87,6 +87,14 @@ public class MyHandlerThread extends HandlerThread {\n                 .sendToTarget();\n     }\n \n+    /**\n+     * Pomocná metóda, ktorá má byť spustená keď dôjde k reštartu aktivity\n+     */\n+    public void onDestroy() {\n+        // Odstránenie všetkých ešte nestiahnutých url adries so zásobníka\n+        mWorkerHandler.removeMessages(ImageUrl.WHAT);\n+    }\n+\n     /*\n         Metóda na stiahnutie obrázku z internetu, Táto metóda je je spustená\n         na pracovnom vlákne!\n",
        "remoteUrl": "",
        "fileList": " .\n └─ app\n    └─ src\n       └─ main\n          ├─ res\n          │  └─ layout\n          │     └─ activity_main.xml\n          ├─ java\n          │  └─ sk\n          │     └─ uniza\n          │        └─ handlerthreadcvicenie\n          │           ├─ ImageUrl.java\n          │           ├─ MainActivity.java\n          │           └─ MyHandlerThread.java\n          └─ AndroidManifest.xml"
    },
    {
        "commitTag": "2.2",
        "commitMsg": "Bezpečný prístupu k zdieľaným premenným z viacerých vláken",
        "commitHash": "14afdd154be446ee907a342bac25db418cc26b4f",
        "commitDiff": "diff --git a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\nindex cdc1bf6..c80acbd 100644\n--- a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\n+++ b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\n@@ -32,6 +32,8 @@ public class MyHandlerThread extends HandlerThread {\n     private Handler mResponseHandler;\n     // Referencia na Callback rozhranie\n     private Callback mCallback;\n+    // Objekt určený na zabezpečenie bezpečného prístupu pri využití vláken\n+    private Object syncObj = new Object();\n \n     // Rozhranie pomocou ktorého sa odovzdá stiahnutý obrázok\n     public interface Callback {\n@@ -50,10 +52,10 @@ public class MyHandlerThread extends HandlerThread {\n         if (instance == null || !instance.isAlive()) {\n             instance = new MyHandlerThread();\n         }\n-\n-        instance.mResponseHandler = responseHandler;\n-        instance.mCallback = callback;\n-\n+        synchronized (instance.syncObj) {\n+            instance.mResponseHandler = responseHandler;\n+            instance.mCallback = callback;\n+        }\n         return instance;\n     }\n \n@@ -93,6 +95,11 @@ public class MyHandlerThread extends HandlerThread {\n     public void onDestroy() {\n         // Odstránenie všetkých ešte nestiahnutých url adries so zásobníka\n         mWorkerHandler.removeMessages(ImageUrl.WHAT);\n+        // Bezpečné vynulovanie referencie na Handler, ktorý pri reštarte\n+        // aktivity bude po dobu reštartu neplatná\n+        synchronized (syncObj) {\n+            mResponseHandler = null;\n+        }\n     }\n \n     /*\n@@ -122,16 +129,20 @@ public class MyHandlerThread extends HandlerThread {\n                 Stiahnutý obrázok sa odovzdá s pomocu Handler triedy UI\n                 vláknu, ktoré zavolá callback metódu\n              */\n-            if (bitmap != null) {\n-                mResponseHandler.post(new Runnable() {\n-                    @Override\n-                    public void run() {\n-                        // Spustené na UI vlákne\n-                        mCallback.onImageDownloaded(\n-                                imageUrl.uiToShowImage.get(),\n-                                bitmap);\n-                    }\n-                });\n+            // Bezpečný prístup z pracovného vlákna\n+            synchronized (syncObj) {\n+                // Overenie, že referencia na Handler je platná\n+                if (mResponseHandler != null && bitmap != null) {\n+                    mResponseHandler.post(new Runnable() {\n+                        @Override\n+                        public void run() {\n+                            // Spustené na UI vlákne\n+                            mCallback.onImageDownloaded(\n+                                    imageUrl.uiToShowImage.get(),\n+                                    bitmap);\n+                        }\n+                    });\n+                }\n             }\n \n         } catch (IOException e) {\n",
        "remoteUrl": "",
        "fileList": " .\n └─ app\n    └─ src\n       └─ main\n          ├─ res\n          │  └─ layout\n          │     └─ activity_main.xml\n          ├─ java\n          │  └─ sk\n          │     └─ uniza\n          │        └─ handlerthreadcvicenie\n          │           ├─ ImageUrl.java\n          │           ├─ MainActivity.java\n          │           └─ MyHandlerThread.java\n          └─ AndroidManifest.xml"
    },
    {
        "commitTag": "2.3",
        "commitMsg": "Aplikovanie Cache na rýchle načítanie už stiahnutých obrázkov",
        "commitHash": "598937e7d9a24dd25956596161eadcb87b693538",
        "commitDiff": "diff --git a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\nindex c80acbd..9da5b8f 100644\n--- a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\n+++ b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\n@@ -6,10 +6,10 @@ import android.os.Handler;\n import android.os.HandlerThread;\n import android.os.Message;\n import android.os.Process;\n-import android.os.Trace;\n import android.widget.ImageView;\n \n import androidx.annotation.NonNull;\n+import androidx.collection.LruCache;\n \n import java.io.IOException;\n import java.io.InputStream;\n@@ -40,6 +40,15 @@ public class MyHandlerThread extends HandlerThread {\n         public void onImageDownloaded(ImageView imageView, Bitmap bitmap);\n     }\n \n+    // Cache na uloženie sťahovaných obrázkov\n+    final int cacheSize = 4 * 1024 * 1024; // 4MiB\n+    LruCache<String, Bitmap> bitmapCache =\n+            new LruCache<String, Bitmap>(cacheSize) {\n+                protected int sizeOf(String key, Bitmap value) {\n+                    return value.getByteCount();\n+                }\n+            };\n+\n     public MyHandlerThread() {\n         super(TAG);\n         setPriority(Process.THREAD_PRIORITY_BACKGROUND); //Nastavenie\n@@ -111,20 +120,25 @@ public class MyHandlerThread extends HandlerThread {\n         try {\n             final Bitmap bitmap;\n \n-            Trace.beginSection(\"HTTP download\");\n-            HttpURLConnection connection =\n-                    (HttpURLConnection) new URL(imageUrl.urlOfImage)\n-                            .openConnection();\n-            connection.setRequestMethod(\"GET\");\n-            bitmap = BitmapFactory\n-                    .decodeStream((InputStream) connection.getContent());\n-\n-            try {\n-                this.sleep(500);\n-            } catch (InterruptedException e) {\n-                e.printStackTrace();\n+            // Načítanie obrázku z cache(klúč je url adresa obrázku), ak nebol\n+            // nájdený metóda vráti null hodnotu\n+            Bitmap bitmapTmp = bitmapCache.get(imageUrl.urlOfImage);\n+            if (bitmapTmp == null) {\n+                HttpURLConnection connection =\n+                        (HttpURLConnection) new URL(imageUrl.urlOfImage)\n+                                .openConnection();\n+                connection.setRequestMethod(\"GET\");\n+                bitmap = BitmapFactory\n+                        .decodeStream((InputStream) connection.getContent());\n+                bitmapCache.put(imageUrl.urlOfImage, bitmap);\n+                try {\n+                    this.sleep(500);\n+                } catch (InterruptedException e) {\n+                    e.printStackTrace();\n+                }\n+            } else {\n+                bitmap = bitmapTmp;\n             }\n-\n             /*\n                 Stiahnutý obrázok sa odovzdá s pomocu Handler triedy UI\n                 vláknu, ktoré zavolá callback metódu\n",
        "remoteUrl": "",
        "fileList": " .\n └─ app\n    └─ src\n       └─ main\n          ├─ res\n          │  └─ layout\n          │     └─ activity_main.xml\n          ├─ java\n          │  └─ sk\n          │     └─ uniza\n          │        └─ handlerthreadcvicenie\n          │           ├─ ImageUrl.java\n          │           ├─ MainActivity.java\n          │           └─ MyHandlerThread.java\n          └─ AndroidManifest.xml"
    },
    {
        "commitTag": "3.0",
        "commitMsg": "Implementovanie LifeCycle AndroidX komponentu",
        "commitHash": "eddf187baad520199a103b95ca164b0bfbbf03ae",
        "commitDiff": "diff --git a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java\nindex 8636eed..638c41c 100644\n--- a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java\n+++ b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MainActivity.java\n@@ -23,7 +23,8 @@ public class MainActivity extends AppCompatActivity\n         super.onCreate(savedInstanceState);\n         setContentView(R.layout.activity_main);\n         imageContainer = findViewById(R.id.imageContainer);\n-        myHandlerThread = MyHandlerThread.getInstance(new Handler(), this);\n+        myHandlerThread = MyHandlerThread\n+                .getInstance(new Handler(), this, getLifecycle());\n \n         if (!myHandlerThread.isAlive()) {\n             // Iba pri prvom spustení musí prebehnúť inicializácia\n@@ -59,10 +60,4 @@ public class MainActivity extends AppCompatActivity\n             imageView.setImageBitmap(bitmap);\n     }\n \n-    @Override\n-    protected void onDestroy() {\n-        super.onDestroy();\n-        myHandlerThread.onDestroy();\n-\n-    }\n }\ndiff --git a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\nindex 9da5b8f..d706f64 100644\n--- a/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\n+++ b/app/src/main/java/sk/uniza/handlerthreadcvicenie/MyHandlerThread.java\n@@ -10,13 +10,17 @@ import android.widget.ImageView;\n \n import androidx.annotation.NonNull;\n import androidx.collection.LruCache;\n+import androidx.lifecycle.Lifecycle;\n+import androidx.lifecycle.LifecycleObserver;\n+import androidx.lifecycle.OnLifecycleEvent;\n \n import java.io.IOException;\n import java.io.InputStream;\n import java.net.HttpURLConnection;\n import java.net.URL;\n \n-public class MyHandlerThread extends HandlerThread {\n+public class MyHandlerThread extends HandlerThread implements\n+        LifecycleObserver {\n \n     // Referencia na vytvorenú štanciu MyHandlerThread\n     private static MyHandlerThread instance = null;\n@@ -56,7 +60,8 @@ public class MyHandlerThread extends HandlerThread {\n     }\n \n     public static MyHandlerThread getInstance(@NonNull Handler responseHandler,\n-                                              @NonNull Callback callback) {\n+                                              @NonNull Callback callback,\n+                                              @NonNull Lifecycle lifecycle) {\n \n         if (instance == null || !instance.isAlive()) {\n             instance = new MyHandlerThread();\n@@ -64,6 +69,9 @@ public class MyHandlerThread extends HandlerThread {\n         synchronized (instance.syncObj) {\n             instance.mResponseHandler = responseHandler;\n             instance.mCallback = callback;\n+            // Zaregistrovanie LifeCycleObserver, ktorým je táto trieda\n+            // pripojená na životný cyklus nadradenej aktivity\n+            lifecycle.addObserver(instance);\n         }\n         return instance;\n     }\n@@ -100,7 +108,9 @@ public class MyHandlerThread extends HandlerThread {\n \n     /**\n      * Pomocná metóda, ktorá má byť spustená keď dôjde k reštartu aktivity\n+     * Táto metóda je teraz pripojená na životný cyklus nadradenej aktivity\n      */\n+    @OnLifecycleEvent(Lifecycle.Event.ON_DESTROY)\n     public void onDestroy() {\n         // Odstránenie všetkých ešte nestiahnutých url adries so zásobníka\n         mWorkerHandler.removeMessages(ImageUrl.WHAT);\n",
        "remoteUrl": "",
        "fileList": " .\n └─ app\n    └─ src\n       └─ main\n          ├─ res\n          │  └─ layout\n          │     └─ activity_main.xml\n          ├─ java\n          │  └─ sk\n          │     └─ uniza\n          │        └─ handlerthreadcvicenie\n          │           ├─ ImageUrl.java\n          │           ├─ MainActivity.java\n          │           └─ MyHandlerThread.java\n          └─ AndroidManifest.xml"
    }
]